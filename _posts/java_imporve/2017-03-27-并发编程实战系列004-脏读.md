
```java
public class DirtyRead {
    private String name = "james";
    private String pwd = "000";

    public synchronized void setValue(String name, String pwd) {
        this.name = name;

        try {
            Thread.sleep(2000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

        this.pwd = pwd;
    }

    public  void getValue() {
        System.out.println("name: " + this.name + " pwd: " + this.pwd);
    }


    public static void main(String[] args) {
        DirtyRead dr = new DirtyRead();
        dr.getValue();
        Thread t1 = new Thread(() -> dr.setValue("kobe", "123"));
        t1.start();
        try {
            t1.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        dr.getValue();

    }
}
```
实际结果为:
```
name: james pwd: 000
name: kobe pwd: 000
```
结果意外地name修改完成，pwd则还是原值。原因是出现了脏读(Dirty Read)，当我们只在setValue或getValue上加上synchronized修饰，其结果都如上述，并非我们所期待。而同时在这两个方法上加上synchronized修饰，结果正如我们所预期。  
```
name: james pwd: 000
name: kobe pwd: 123
```
本质上是两个线程访问同一个对象，可以在每个方法上加锁，也可以使用static

方式一:
```java
public class DirtyRead {
    private String username = "james";
    private String password = "000";

    public synchronized void setValue(String name, String pwd) {
        this.username = name;

        try {
            Thread.sleep(2000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

        this.password = pwd;
    }

    public synchronized void getValue() {
        System.out.println("name: " + this.username + " pwd: " + this.password);
    }

    public static void main(String[] args) {
        DirtyRead dr = new DirtyRead();
        dr.getValue();
        Thread t1 = new Thread(() -> dr.setValue("kobe", "123"));
        t1.start();
        try {
            t1.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        dr.getValue();
    }
}
```
方式二:  
```java
public class DirtyRead {
    private static String username = "james";
    private static String password = "000";

    public  static synchronized void setValue(String name, String pwd) {
        username = name;

        try {
            Thread.sleep(2000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

        password = pwd;
    }

    public static synchronized void getValue() {
        System.out.println("name: " + username + " pwd: " + password);
    }

    public static void main(String[] args) {
        DirtyRead dr = new DirtyRead();
        dr.getValue();
        Thread t1 = new Thread(() -> dr.setValue("kobe", "123"));
        t1.start();
        try {
            t1.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        dr.getValue();

    }
}
```