
## kubernetes 概念
- pod 
  `最小的任务调度单元`
  
- replication controller (rc) 

```
用于保持pod任务数量不变的功能性单元。  
每个rc对应一定数量的pod，而pod数量因为故障减少或故障恢复变多，这样的情况发生会自动地调整pod的数量。本身来说是功能的概念。可以称之为冗余控制。
```

- service

```
功能性的抽象概念，本身代表着对外暴露服务的端口，以及在该端口上面，进行端口映射，和流量负载均衡的单元模块。每一个这样的单元模块就会声明这样的一个servcie元素。
```

- deployment：
`抽象概念，代表服务的部署操作，一般和service一起使用。`

- 两种特别类型的部署
  - DaemonSet:
  
```
通过daemonSet部署服务，会在集群的每一个节点都运行一个拷贝，通常是做一些日常的信息收集和比较底层的基础服务比较相关的功能
```
 
  - job
  `部署的是一类运行完成就会结束的批量任务的服务。`
    
- namespace:
  
```
每一个资源都是属于特定的namespace，该ns就限定了资源所有人能够访问的范围，并且使得每个ns都觉得像是在占用整个kubernetes资源池。不同的资源池的不同资源的namespace是可以重复的。命名上的隔离，在docker的资源隔离概念上又增加了租户隔离的概念(不同用户登录系统看到不同桌面，得到不同的配置)
```

## kubernetes下做集群管理和容器部署大概是怎样的过程?
假设我们有需要部署和调度的任务
首先我们需要确定它属于哪个组织单元，也就是确定其namespace
然后确定该任务的运行方式，如果长期的后台运行，deployment
批量的单次集群任务或定时集群任务的话，job
如果是一个普适性的任务，在每个地方都需要长期运行的，daemontSet
此外如果服务需要对外提供访问的话，我们还需要service
最后将刚刚提高的任务补充全其所需要的对象参数，分别写成一个或者几个的对象描述文件，在kubernetes中称为资源描述文件，将资源描述文件传递给kubernetes，然后通过k8s的命令行工具或者api接口，然后等上两分钟，k8s会自动的把这些任务服务按照我们所丰富的方式所部署好和安排好。这样就可以欢乐的使用我们的服务了。

##构建k8s集群
aws-ssh-to s...n
每个环境中都要提前安装好docker环境

主从结构的部署方式
根据具体的职责进行详细的划分

1. 集群基础设施
 包括k8s所依赖元数据的存储服务和集群的网络规划和管理的服务
主要是
etcd
flannel/calico

2. k8s服务
master
node 
k8s服务部署节点看似多，但只不过是多起了几个应用程序而已
主要目的是各个功能从模块上解耦，以后可以被其他重新实现的模块所替代

3. 自带插件服务（非必须）
有时会自动安装，或额外的自己手动部署。看需求

## k8s的安装
官网提供很多各个平台自动化的安装脚本非常方便！
但是手工部署会对其认识更清晰些。  

手工部署与具体的平台环境无关，也就是公、私有云，物理，虚拟主机都可以部署。  
对机器的性能要求不是很高。

### 安装包和依赖包
最主要的是etcd和flannel或calico以及k8s本身。  

